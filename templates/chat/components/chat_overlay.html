{% load i18n %}
<div x-data="{ chatOpen: false }" class="chat-overlay-container">
  <!-- Sliding Tab -->
  <div
    class="pg-chat-tab"
    :class="{ 'opacity-0': chatOpen }"
    @click="chatOpen = true"
    x-show="!chatOpen"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-300"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
  >
    <div class="flex items-center">
      <i class="fa fa-comments text-lg"></i>
      <span class="ml-2 pg-hidden-mobile-inline">{% translate "Chat" %}</span>
    </div>
  </div>

  <!-- Chat Overlay -->
  <div
    class="pg-chat-overlay"
    x-show="chatOpen"
    x-cloak
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="transform translate-x-full"
    x-transition:enter-end="transform translate-x-0"
    x-transition:leave="transition ease-in duration-300"
    x-transition:leave-start="transform translate-x-0"
    x-transition:leave-end="transform translate-x-full"

  >
    <!-- Header -->
    <div class="pg-chat-overlay-header">
      <h3 class="pg-subtitle">{% translate "Chat Assistant" %}</h3>
      <button @click="chatOpen = false" >
        <i class="fa fa-times"></i>
      </button>
    </div>
    <!-- Chat Content -->
    <div class="pg-chat-overlay-content">
      {% include "chat/components/chat_thread_streaming.html" with embedded=True websocket_url=chat_websocket_url %}
    </div>
  </div>
</div>
